<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Lease vs Rent AI Fintech Dashboard</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>

/* ---------- DARK FINTECH THEME ---------- */

body{
margin:0;
font-family:Inter,Arial;
background:linear-gradient(135deg,#0b1622,#0f2336,#081018);
color:#e6eef7;
padding:15px;
}

.container{max-width:1150px;margin:auto;}

h1{
text-align:center;
font-weight:700;
background:linear-gradient(90deg,#00d4ff,#2ecc71,#00d4ff);
-webkit-background-clip:text;
color:transparent;
animation:glow 6s linear infinite;
}

@keyframes glow{
0%{filter:hue-rotate(0deg)}
100%{filter:hue-rotate(360deg)}
}

/* ---------- GLASS CARDS ---------- */

.card{
background:rgba(255,255,255,0.05);
backdrop-filter:blur(14px);
border:1px solid rgba(255,255,255,0.08);
border-radius:16px;
padding:20px;
margin-bottom:20px;
box-shadow:0 10px 30px rgba(0,0,0,.35);
transition:.35s;
}

.card:hover{
transform:translateY(-4px);
box-shadow:0 14px 40px rgba(0,0,0,.6);
}

/* ---------- GRID ---------- */

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:10px;
}

input{
background:#07111c;
border:1px solid #1e3a52;
color:#e6eef7;
padding:12px;
border-radius:10px;
outline:none;
transition:.25s;
}

input:focus{
border-color:#00d4ff;
box-shadow:0 0 8px rgba(0,212,255,.4);
}

/* ---------- BUTTONS ---------- */

button{
background:linear-gradient(90deg,#1f4e79,#00d4ff);
border:none;
color:white;
padding:12px;
border-radius:10px;
font-weight:bold;
cursor:pointer;
transition:.3s;
}

button:hover{
transform:scale(1.05);
box-shadow:0 0 12px rgba(0,212,255,.6);
}

.scenarioBtns{display:flex;gap:8px;margin-top:10px}
.scenarioBtns button{flex:1}

/* ---------- VERDICT ---------- */

.verdict{
font-size:26px;
font-weight:bold;
text-align:center;
margin-top:10px;
}

/* ---------- GAUGE ---------- */

.gauge{
height:18px;
background:#0b1a29;
border-radius:10px;
overflow:hidden;
margin-top:12px;
}

.gauge-fill{
height:100%;
width:0%;
background:linear-gradient(90deg,#ff4d4d,#f1c40f,#2ecc71);
transition:width 1s ease;
}

/* ---------- TEXT COLORS ---------- */

.good{color:#2ecc71}
.warning{color:#f1c40f}
.bad{color:#ff4d4d}

.bigNumber{
font-size:22px;
font-weight:600;
margin-top:6px;
}

</style>
</head>

<body>

<div class="container">

<h1>Lease vs Rent AI Fintech Dashboard</h1>

<div class="card">
<h3>Inputs</h3>

<div class="grid">
<input id="leaseAmount" class="currency" placeholder="Lease Amount">
<input id="loanAmount" class="currency" placeholder="Loan Amount">
<input id="loanRate" class="percent" placeholder="Loan Interest %">
<input id="loanTenure" placeholder="Loan Tenure Months">
<input id="leaseTenure" placeholder="Lease Tenure Months">
<input id="withholding" class="percent" placeholder="Lease Withholding %">
<input id="refundDelay" placeholder="Refund Delay Months">
<input id="maintenance" class="currency" placeholder="Monthly Maintenance">
<input id="marketRent" class="currency" placeholder="Market Rent">
<input id="oppRate" class="percent" placeholder="Opportunity Cost %">
<input id="riskPremium" class="percent" placeholder="Risk Premium %">
<input id="salary" class="currency" placeholder="Take Home Salary (Optional)">
</div>

<div class="scenarioBtns">
<button onclick="runScenario('best')">ðŸŸ¢ Best</button>
<button onclick="runScenario('realistic')">ðŸŸ¡ Realistic</button>
<button onclick="runScenario('worst')">ðŸ”´ Worst</button>
</div>

<button onclick="downloadPDF()">Download Professional Report</button>

</div>

<div class="card">
<div id="results"></div>
<div id="verdict" class="verdict"></div>
<div class="gauge"><div id="gaugeFill" class="gauge-fill"></div></div>
</div>

<div class="card">
<canvas id="chart"></canvas>
</div>

</div>

<script>

let chartInstance;
let lastResults={};

const $=id=>document.getElementById(id);

/* ---------- FORMAT ENGINE ---------- */

function clean(v){return parseFloat((v||"").replace(/[â‚¹,%\s,]/g,""))||0;}
function INR(n){return "â‚¹ "+Math.round(n||0).toLocaleString("en-IN");}
function PCT(n){return (n||0).toFixed(2)+"%";}

document.querySelectorAll(".currency").forEach(i=>{
i.addEventListener("blur",()=>{let v=clean(i.value);if(v)i.value=INR(v);});
});
document.querySelectorAll(".percent").forEach(i=>{
i.addEventListener("blur",()=>{let v=clean(i.value);if(v)i.value=PCT(v);});
});

/* ---------- FINANCIAL ENGINE ---------- */

function emi(P,r,n){
if(r===0)return P/n;
return P*r*Math.pow(1+r,n)/(Math.pow(1+r,n)-1);
}

function runScenario(type){

let riskAdj=1,oppAdj=1;
if(type==="best"){riskAdj=.6;oppAdj=.8;}
if(type==="worst"){riskAdj=1.5;oppAdj=1.2;}

calculate(type,riskAdj,oppAdj);
}

function calculate(label,riskAdj,oppAdj){

const leaseAmount=clean($("leaseAmount").value);
const loanAmount=clean($("loanAmount").value);
const ownFunds=Math.max(0,leaseAmount-loanAmount);

const loanRate=(clean($("loanRate").value)/100)/12;
const loanTenure=clean($("loanTenure").value);
const leaseTenure=clean($("leaseTenure").value);

const maintenance=clean($("maintenance").value);
const marketRent=clean($("marketRent").value);

const oppRate=((clean($("oppRate").value)/100)/12)*oppAdj;
const riskPremium=(clean($("riskPremium").value)/100)*riskAdj;

const EMI=emi(loanAmount,loanRate,loanTenure);

const totalEconomic=EMI*loanTenure-loanAmount + ownFunds*oppRate*leaseTenure;

const riskRent=(totalEconomic/leaseTenure)*(1+riskPremium);

const monthlySavings=marketRent-riskRent;
const yearlySavings=monthlySavings*12;
const termSavings=monthlySavings*leaseTenure;

let score=(monthlySavings/marketRent)*100;
score=Math.max(0,Math.min(100,score));

let verdictText="ðŸŸ¡ NEUTRAL";
if(score>20) verdictText="ðŸŸ¢ LEASE IS WINNING";
if(score<5) verdictText="ðŸ”´ RENT IS SAFER";

$("verdict").innerText=verdictText+" ("+label.toUpperCase()+")";
$("gaugeFill").style.width=score+"%";

$("results").innerHTML=`
<div>Own Funds Used: ${INR(ownFunds)}</div>
<div>EMI: ${INR(EMI)}</div>
<div>Risk Adjusted Rent: ${INR(riskRent)}</div>
<div class="bigNumber">Monthly Savings: ${INR(monthlySavings)}</div>
<div>Yearly Savings: ${INR(yearlySavings)}</div>
<div>Total Term Savings: ${INR(termSavings)}</div>
`;

lastResults={EMI,riskRent,monthlySavings,yearlySavings,termSavings,label,verdictText};

if(chartInstance)chartInstance.destroy();
chartInstance=new Chart($("chart"),{
type:"bar",
data:{
labels:["Market Rent","Risk Rent"],
datasets:[{label:"Scenario: "+label,data:[marketRent,riskRent]}]
}
});
}

/* ---------- PROFESSIONAL PDF ---------- */

async function downloadPDF(){

if(!lastResults.EMI){
alert("Run analysis first");
return;
}

const {jsPDF}=window.jspdf;
const doc=new jsPDF();

doc.setFontSize(18);
doc.text("Lease vs Rent Financial Decision Report",20,20);

doc.setFontSize(12);
doc.text("Executive Summary",20,40);
doc.text("Verdict: "+lastResults.verdictText,20,50);
doc.text("Scenario: "+lastResults.label,20,60);

doc.text("Financial Breakdown",20,80);
doc.text("EMI: "+INR(lastResults.EMI),20,90);
doc.text("Risk Adjusted Rent: "+INR(lastResults.riskRent),20,100);

doc.text("Savings Analysis",20,120);
doc.text("Monthly Savings: "+INR(lastResults.monthlySavings),20,130);
doc.text("Yearly Savings: "+INR(lastResults.yearlySavings),20,140);
doc.text("Lease Term Savings: "+INR(lastResults.termSavings),20,150);

doc.setFontSize(10);
doc.text("Generated by Lease vs Rent AI Fintech Dashboard.",20,180);

doc.save("Lease_vs_Rent_Professional_Report.pdf");
}

</script>
</body>
</html>