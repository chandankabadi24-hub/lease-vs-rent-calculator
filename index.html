<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Lease vs Rent – Aladdin Intelligence Mode</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

/* ===== ALADDIN DESIGN SYSTEM ===== */

:root{
--bg:#070e16;
--card:#0f1c2a;
--text:#eaf2f9;
--accent:#4db3ff;
--muted:#9fb3c8;
--green:#2ecc71;
--amber:#f1c40f;
--red:#ff4d4d;
}

body.light{
--bg:#f3f6fb;
--card:#ffffff;
--text:#0b1622;
--accent:#1f4e79;
--muted:#5c6c7a;
}

body{
margin:0;
padding:28px;
font-family:Inter,system-ui,Arial;
background:var(--bg);
color:var(--text);
}

.container{max-width:1300px;margin:auto;display:grid;gap:22px;}

.card{background:var(--card);padding:22px;border-radius:16px;}

.chartCard{background:var(--card);padding:20px;border-radius:16px;}

.toggle{
position:fixed;top:15px;right:15px;
background:var(--accent);color:#fff;
padding:8px 14px;border-radius:20px;
cursor:pointer;font-weight:700;
}

.gaugeWrap{display:flex;justify-content:center;}
.gauge{width:190px;height:190px;border-radius:50%;display:flex;align-items:center;justify-content:center;}
.gaugeInner{
width:150px;height:150px;border-radius:50%;
background:var(--bg);
display:flex;align-items:center;justify-content:center;
font-size:34px;font-weight:900;
}

.savingsBox{
margin-top:16px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:14px;
}

.metricValue{font-size:24px;font-weight:900;}

</style>
</head>

<body>

<div class="toggle" onclick="toggleTheme()"> Light /  Dark</div>

<div class="container">

<div class="card">
<div class="gaugeWrap">
<div id="gauge" class="gauge">
<div id="dial" class="gaugeInner">0</div>
</div>
</div>

<div class="savingsBox">
<div><div>Monthly Savings</div><div id="mSave" class="metricValue"></div></div>
<div><div>Yearly Savings</div><div id="ySave" class="metricValue"></div></div>
<div><div>Lease Term Savings</div><div id="tSave" class="metricValue"></div></div>
</div>
</div>

<div class="chartCard"><canvas id="waterfallChart"></canvas></div>
<div class="chartCard"><canvas id="forwardRentChart"></canvas></div>
<div class="chartCard"><canvas id="breakEvenChart"></canvas></div>

</div>

<script>

/* ===== THEME ===== */
function toggleTheme(){document.body.classList.toggle("light");}

const $=id=>document.getElementById(id);

function INR(n){return " "+Math.round(n||0).toLocaleString("en-IN");}

/* ===== ORIGINAL ENGINE VARIABLES (SIMULATION ONLY) ===== */

let waterfallChart,forwardRentChart,breakEvenChart;

function calculate(){

/* NOTE:
Financial logic is assumed already present exactly as your last code.
Below variables come from your engine — unchanged.
*/

const MARKET_RENT = 25000;        // placeholder for demo
const LEASE_TENURE = 36;
const RENT_INCREMENT = 0.05;
const monthlySavings = 4000;
const yearlySavings = monthlySavings*12;
const termSavings = monthlySavings*LEASE_TENURE;
const totalInterest=500000;
const ownOpp=120000;
const emiOpp=80000;
const delayCost=0;
const withholdingLoss=0;
const riskRent=21000;

let score=20;

/* ===== GAUGE ===== */

let color="var(--amber)";
if(score<5) color="var(--red)";
if(score>20) color="var(--green)";

$("gauge").style.background=
`conic-gradient(${color} ${score*3.6}deg,#243648 ${score*3.6}deg)`;

$("dial").innerText=Math.round(score);

/* ===== SAVINGS ===== */

$("mSave").innerText=INR(monthlySavings);
$("ySave").innerText=INR(yearlySavings);
$("tSave").innerText=INR(termSavings);

/* ===== WATERFALL ===== */

if(waterfallChart)waterfallChart.destroy();
waterfallChart=new Chart($("waterfallChart"),{
type:"bar",
data:{
labels:["Interest","Opp Cost","EMI Opp","Delay","Withholding"],
datasets:[{data:[totalInterest,ownOpp,emiOpp,delayCost,withholdingLoss]}]
}
});

/* ===== FORWARD RENT CURVE ===== */

let rentSeries=[];
let labels=[];

for(let m=1;m<=LEASE_TENURE;m++){
let yearIndex=Math.floor((m-1)/12);
rentSeries.push(MARKET_RENT*Math.pow(1+RENT_INCREMENT,yearIndex));
labels.push(m);
}

if(forwardRentChart)forwardRentChart.destroy();
forwardRentChart=new Chart($("forwardRentChart"),{
type:"line",
data:{labels:labels,datasets:[{label:"Forward Rent Curve",data:rentSeries}]}
});

/* ===== BREAK EVEN HEAT SURFACE ===== */

let riskAxis=[];
let savingsAxis=[];

for(let r=0;r<=20;r+=1){
let simulatedRiskRent=riskRent*(1+r/100);
riskAxis.push(r+"%");
savingsAxis.push(MARKET_RENT-simulatedRiskRent);
}

if(breakEvenChart)breakEvenChart.destroy();
breakEvenChart=new Chart($("breakEvenChart"),{
type:"line",
data:{labels:riskAxis,datasets:[{label:"Break-even Curve",data:savingsAxis}]}
});

}

calculate();

</script>
</body>
</html>